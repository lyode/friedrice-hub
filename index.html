var branchNames = {
            'shah-alam': 'Shah Alam Central',
            'pj-ss2': 'PJ SS2 Branch',
            'subang': 'Subang Parade',
            'klcc': 'KLCC Branch'
        };                <div class="form-group">
                    <label class="form-label">Branch *</label>
                    <select class="form-input" id="memberBranch" onchange="handleBranchChange()" style="background: white;">
                        <option value="">Select Branch</option>
                        <optgroup label="🌟 Klang Valley - Premium">
                            <option value="KLCC Branch">🌟 KLCC Branch - Suria KLCC, Level 4</option>
                            <option value="Pavilion KL">🌟 Pavilion KL - Level 6, Elite Floor</option>
                            <option value="Starhill Gallery">🌟 Starhill Gallery - Lot 6.01, Level 6</option>
                            <option value="The Gardens Mall">🌟 The Gardens Mall - Level 3, Premium Wing</option>
                        </optgroup>
                        <optgroup label="🏬 Klang Valley - Shopping Malls">
                            <option value="Sunway Pyramid">🛍️ Sunway Pyramid - LG2 Floor</option>
                            <option value="One Utama">🏬 One Utama - New Wing, Level 3</option>
                            <option value="Mid Valley">🏢 Mid Valley - Level 3, Megamall</option>
                            <option value="Sunway Velocity">🏬 Sunway Velocity - Level 2</option>
                            <option value="IOI City Mall">🏬 IOI City Mall - Level 2</option>
                            <option value="Empire Shopping">🏬 Empire Shopping - Level 1</option>
                        </optgroup>
                        <optgroup label="🏢 Selangor - Main Areas">
                            <option value="Shah Alam Central">🏢 Shah Alam Central - Jalan Tengku Ampuan</option>
                            <option value="PJ SS2 Branch">🏬 PJ SS2 Branch - SS2 Shopping Center</option>
                            <option value="Subang Parade">🏪 Subang Parade - Level 2, Mall</option>
                            <option value="Damansara Uptown">🏢 Damansara Uptown - Block C</option>
                            <option value="Kota Damansara">🏢 Kota Damansara - The Strand Mall</option>
                            <option value="USJ Summit">🏢 USJ Summit - Level 2</option>
                        </optgroup>
                        <optgroup label="🌴 Johor">
                            <option value="JB City Square">🏬 JB City Square - Level 3</option>
                            <option value="Johor Premium">🌟 Johor Premium Outlets - G-23</option>
                            <option value="Paradigm Mall JB">🏬 Paradigm Mall JB - Level 2</option>
                            <option value="Aeon Tebrau">🏬 Aeon Tebrau - Level 1</option>
                        </optgroup>
                        <optgroup label="🏝️ Penang">
                            <option value="Gurney Plaza">🏬 Gurney Plaza - Level 3</option>
                            <option value="Queensbay Mall">🏬 Queensbay Mall - Level 2</option>
                            <option value="Georgetown Heritage">🏛️ Georgetown Heritage - Lebuh Pantai</option>
                            <option value="Penang Times Square">🏬 Penang Times Square - Level 2</option>
                        </optgroup>
                        <optgroup label="🏔️ Other States">
                            <option value="Ipoh Parade">🏬 Ipoh Parade - Level 2, Perak</option>
                            <option value="Kuantan City Mall">🏬 Kuantan City Mall - Level 1, Pahang</option>
                            <option value="Kota Bharu Mall">🏬 Kota Bharu Mall - Kelantan</option>
                            <option value="Melaka Mahkota">🏬 Melaka Mahkota Parade - Level 2</option>
                        </optgroup>
                        <option value="custom" style="background: #fdf2f8; color: #ec4899; font-weight: bold;">➕ Add New Branch (Manual Entry)</option>
                    </select>
                    
                    <!-- Custom Branch Input (Hidden by default) -->
                    <div id="customBranchSection" style="display: none; margin-top: 8px;">
                        <input type="text" class="form-input" id="customBranchInput" placeholder="Enter new branch name and location" style="border: 2px solid #ec4899; background: #fdf2f8;">
                        <div style="display: flex; gap: 8px; margin-top: 8px;">
                            <button type="button" onclick="saveCustomBranch()" style="flex: 1; padding: 8px; background: #ec4899; color: white; border: none; border-radius: 4px; font-size: 12px;">
                                ✅ Save Branch
                            </button>
                            <button type="button" onclick="cancelCustomBranch()" style="flex: 1; padding: 8px; background: #6b7280; color: white; border: none; border-radius: 4px; font-size: 12px;">
                                ❌ Cancel
                            </button>
                        </div>
                        <div style="font-size: 11px; color: #ec4899; margin-top: 4px;">
                            💡 Example: "Kepong Branch - Kepong Village Mall, Level 1"
                        </div>
                    </div>
                </div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fried Rice Shop - Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #fdf2f8, #fce7f3, #f3e8ff);
            max-width: 400px;
            margin: 0 auto;
            min-height: 100vh;
        }
        
        .login-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #fce7f3, #f3e8ff, #fdf2f8);
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 320px;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 24px;
        }
        
        .login-title {
            font-size: 24px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 8px;
        }
        
        .login-subtitle {
            font-size: 14px;
            color: #6b7280;
        }
        
        .branch-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .branch-btn {
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
        }
        
        .branch-btn:hover {
            border-color: #ec4899;
            background: #fdf2f8;
        }
        
        .branch-btn.selected {
            border-color: #ec4899;
            background: #fdf2f8;
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }
        
        .branch-name {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .branch-location {
            font-size: 12px;
            color: #6b7280;
        }
        
        .branch-status {
            font-size: 10px;
            color: #ec4899;
            font-weight: 500;
            margin-top: 4px;
        }
        
        .staff-input {
            margin: 16px 0;
        }
        
        .staff-label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 6px;
        }
        
        .staff-field {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .staff-field:focus {
            outline: none;
            border-color: #ec4899;
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background: #ec4899;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .login-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        
        .main-app {
            display: none;
        }
        
        .main-app.active {
            display: block;
        }
        
        .header {
            background: linear-gradient(135deg, #ec4899, #db2777, #be185d);
            color: white;
            padding: 16px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .header p {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 4px;
        }
        
        .branch-info {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            cursor: pointer;
        }
        
        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .stat-label {
            font-size: 10px;
        }
        
        .tabs {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
        }
        
        .tab {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: none;
            cursor: pointer;
            text-align: center;
            font-size: 12px;
            color: #6b7280;
            border-bottom: 2px solid transparent;
        }
        
        .tab.active {
            color: #ec4899;
            background: #fdf2f8;
            border-bottom-color: #ec4899;
        }
        
        .tab-icon {
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .content {
            padding: 16px;
            padding-bottom: 80px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 12px;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        .form-label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 4px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #ec4899;
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }
        
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }
        
        .btn-primary {
            background: #ec4899;
            color: white;
        }
        
        .btn-primary:hover {
            background: #db2777;
        }
        
        .btn-primary:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        
        .branch-display {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            margin-bottom: 8px;
        }
        
        .member-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 8px;
        }
        
        .member-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .member-name {
            font-size: 14px;
            font-weight: 500;
            color: #1f2937;
        }
        
        .member-id {
            font-size: 12px;
            color: #6b7280;
        }
        
        .member-branch {
            font-size: 10px;
            color: #ec4899;
            background: #fdf2f8;
            padding: 2px 6px;
            border-radius: 4px;
            margin-top: 2px;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 500;
        }
        
        .status-active {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-expiring {
            background: #fef3c7;
            color: #92400e;
        }
        
        .member-phone {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
        }
        
        .stats-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            font-size: 12px;
        }
        
        .stat {
            text-align: center;
            background: #f9fafb;
            padding: 8px;
            border-radius: 4px;
        }
        
        .stat-value {
            font-weight: 500;
        }
        
        .stat-label-small {
            color: #6b7280;
            font-size: 10px;
        }
        
        .metric-card {
            color: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .metric-blue { background: linear-gradient(135deg, #ec4899, #db2777); }
        .metric-green { background: linear-gradient(135deg, #f472b6, #ec4899); }
        .metric-purple { background: linear-gradient(135deg, #d946ef, #c026d3); }
        
        .metric-value {
            font-size: 20px;
            font-weight: bold;
        }
        
        .metric-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .metric-icon {
            font-size: 24px;
        }
        
        .alert-warning {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .alert-text {
            font-size: 14px;
            font-weight: 500;
            color: #92400e;
            margin-left: 8px;
        }
        
        .btn-small {
            padding: 8px 12px;
            font-size: 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .btn-yellow { background: #ec4899; color: white; }
        .btn-green { background: #f472b6; color: white; }
        .btn-blue { background: #d946ef; color: white; }
        
        .btn-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }
        
        .info-box {
            background: #fdf2f8;
            border: 1px solid #f9a8d4;
            padding: 12px;
            border-radius: 8px;
            margin-top: 16px;
        }
        
        .info-title {
            font-size: 14px;
            font-weight: 500;
            color: #be185d;
            margin-bottom: 8px;
        }
        
        .info-list {
            font-size: 12px;
            color: #be185d;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-header">
                <div style="font-size: 48px; margin-bottom: 16px;">🍚</div>
                <h1 class="login-title">Fried Rice Shop</h1>
                <p class="login-subtitle">Login to Membership System</p>
            </div>
            
            <!-- Role Selection -->
            <div class="form-group">
                <label class="form-label">Login Type</label>
                <select class="form-input" id="roleSelect" onchange="toggleLoginType()">
                    <option value="">Select Role</option>
                    <option value="branch">Branch Staff</option>
                    <option value="master">Master/Director</option>
                </select>
            </div>
            
            <!-- Branch Selection (for branch staff) -->
            <div id="branchSection" style="display: none;">
                <div class="form-group">
                    <label class="form-label">Select Branch</label>
                    <div class="branch-grid">
                        <div class="branch-btn" onclick="selectBranch('shah-alam')" data-branch="shah-alam">
                            <div class="branch-name">🏢 Shah Alam Central</div>
                            <div class="branch-location">No. 45, Jalan Tengku Ampuan Zabedah</div>
                            <div class="branch-status">● Online</div>
                        </div>
                        
                        <div class="branch-btn" onclick="selectBranch('pj-ss2')" data-branch="pj-ss2">
                            <div class="branch-name">🏬 PJ SS2 Branch</div>
                            <div class="branch-location">Lot 2-15, SS2 Shopping Center</div>
                            <div class="branch-status">● Online</div>
                        </div>
                        
                        <div class="branch-btn" onclick="selectBranch('subang')" data-branch="subang">
                            <div class="branch-name">🏪 Subang Parade</div>
                            <div class="branch-location">Level 2, Subang Parade Mall</div>
                            <div class="branch-status">● Online</div>
                        </div>
                        
                        <div class="branch-btn" onclick="selectBranch('klcc')" data-branch="klcc">
                            <div class="branch-name">🌟 KLCC Branch</div>
                            <div class="branch-location">Suria KLCC, Level 4</div>
                            <div class="branch-status">● Online</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Master Login (for master/director) -->
            <div id="masterSection" style="display: none;">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" id="masterUsername" placeholder="Enter username">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="masterPassword" placeholder="Enter password">
                </div>
                <div style="font-size: 11px; color: #6b7280; margin-top: 8px;">
                    💡 Demo: username: <strong>admin</strong>, password: <strong>admin123</strong>
                </div>
            </div>
            
            <div class="staff-input">
                <label class="staff-label">Staff Name</label>
                <input type="text" class="staff-field" id="staffName" placeholder="Enter your name">
            </div>
            
            <button class="login-btn" onclick="login()" id="loginBtn" disabled>
                Login to System
            </button>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="main-app">
        <!-- Header -->
        <div class="header">
            <h1>🍚 Fried Rice Shop</h1>
            <p>Membership Management</p>
            <div class="branch-info">
                <span id="currentBranch">Branch: Loading...</span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalMembers">3</div>
                    <div class="stat-label">Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeMembers">2</div>
                    <div class="stat-label">Active</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRevenue">RM980</div>
                    <div class="stat-label">Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="expiringCount">1</div>
                    <div class="stat-label">Expiring</div>
                </div>
            </div>
        </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="showTab('add')">
            <div class="tab-icon">➕</div>
            <div>Add</div>
        </button>
        <button class="tab" onclick="showTab('list')">
            <div class="tab-icon">👥</div>
            <div>List</div>
        </button>
        <button class="tab" onclick="showTab('alerts')">
            <div class="tab-icon">🔔</div>
            <div>Alerts</div>
        </button>
        <button class="tab" onclick="showTab('stats')">
            <div class="tab-icon">📊</div>
            <div>Stats</div>
        </button>
    </div>

    <!-- Content -->
    <div class="content">
        <!-- Add Member Section -->
        <div id="add" class="section active">
            <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Add New Member</h2>
            
            <div class="card">
                <div class="form-group">
                    <label class="form-label">Name *</label>
                    <input type="text" class="form-input" id="memberName" placeholder="Customer name">
                </div>

                <div class="form-group">
                    <label class="form-label">Phone *</label>
                    <input type="tel" class="form-input" id="memberPhone" placeholder="+60xxxxxxxxx">
                </div>

                <div class="form-group">
                    <label class="form-label">Membership Plan *</label>
                    <select class="form-input" id="memberDuration" style="padding: 8px 12px; font-size: 13px;">
                        <option value="1" data-price="30">1 Month - RM30</option>
                        <option value="3" data-price="80">3 Months - RM80 (Save RM10)</option>
                        <option value="6" data-price="150">6 Months - RM150 (Save RM30)</option>
                        <option value="12" data-price="250" selected>12 Months - RM250 (Save RM110) ⭐ Popular</option>
                        <option value="18" data-price="375">18 Months - RM375 (Save RM165)</option>
                        <option value="24" data-price="480">24 Months - RM480 (Save RM240)</option>
                    </select>
                    <div style="font-size: 11px; color: #6b7280; margin-top: 4px; display: flex; justify-content: space-between;">
                        <span>💡 Longer plans = Better savings</span>
                        <span id="priceDisplay" style="font-weight: bold; color: #ec4899;">RM250</span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="addMember()" id="addMemberBtn">Add Member - RM250</button>
            </div>

            <div class="info-box">
                <div class="info-title">🏢 Branch Network (25+ Locations)</div>
                <div class="info-list">
                    <strong>🌟 Premium Locations:</strong><br>
                    • KLCC, Pavilion KL, Starhill Gallery, The Gardens<br><br>
                    
                    <strong>🏬 Major Shopping Malls:</strong><br>
                    • Sunway Pyramid, One Utama, Mid Valley, IOI City<br><br>
                    
                    <strong>🏢 Selangor Network:</strong><br>
                    • Shah Alam, PJ SS2, Subang, Damansara, USJ<br><br>
                    
                    <strong>🌏 Nationwide Coverage:</strong><br>
                    • Johor: JB City Square, Paradigm Mall<br>
                    • Penang: Gurney Plaza, Queensbay<br>
                    • Others: Ipoh, Kuantan, Melaka, Kelantan<br><br>
                    
                    <strong>➕ Growing Network:</strong><br>
                    • Add new branches instantly with manual entry<br>
                    • Perfect for franchise expansion<br>
                    • Supports 100+ locations<br><br>
                    
                    <strong>💰 Membership Benefits:</strong><br>
                    • Valid at ALL branches nationwide<br>
                    • 10% discount + points system<br>
                    • Birthday specials + priority seating
                </div>
            </div>
        </div>

        <!-- Members List Section -->
        <div id="list" class="section">
            <!-- Branch Staff View -->
            <div id="branchListView" style="display: none;">
                <div style="text-center; padding: 32px; background: white; border-radius: 8px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔒</div>
                    <h3 style="font-size: 16px; font-weight: 500; color: #1f2937; margin-bottom: 8px;">Access Restricted</h3>
                    <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Branch staff can only add new members.</p>
                    <p style="font-size: 12px; color: #6b7280;">Contact master/director for member details access.</p>
                </div>
            </div>
            
            <!-- Master/Director View -->
            <div id="masterListView" style="display: none;">
                <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">All Members (3)</h2>
                
                <div class="member-card">
                    <div class="member-header">
                        <div>
                            <div class="member-name">Sarah Chen</div>
                            <div class="member-id">M001</div>
                            <div class="member-branch">Shah Alam Central</div>
                        </div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    <div class="member-phone">📞 +60123456789</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value">⭐ 450</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">12</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM480</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-header">
                        <div>
                            <div class="member-name">Ahmad Rahman</div>
                            <div class="member-id">M002</div>
                            <div class="member-branch">PJ SS2 Branch</div>
                        </div>
                        <span class="status-badge status-expiring">Expiring Soon</span>
                    </div>
                    <div class="member-phone">📞 +60198765432</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value">⭐ 280</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">8</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM320</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-header">
                        <div>
                            <div class="member-name">Priya Sharma</div>
                            <div class="member-id">M003</div>
                            <div class="member-branch">Subang Parade</div>
                        </div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    <div class="member-phone">📞 +60167890123</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value">⭐ 150</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">5</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM180</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alerts Section -->
        <div id="alerts" class="section">
            <!-- Branch Staff View -->
            <div id="branchAlertsView" style="display: none;">
                <div style="text-center; padding: 32px; background: white; border-radius: 8px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔒</div>
                    <h3 style="font-size: 16px; font-weight: 500; color: #1f2937; margin-bottom: 8px;">Access Restricted</h3>
                    <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Only master/director can view renewal alerts.</p>
                    <p style="font-size: 12px; color: #6b7280;">Focus on adding new members for your branch.</p>
                </div>
            </div>
            
            <!-- Master/Director View -->
            <div id="masterAlertsView" style="display: none;">
                <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Renewal Alerts</h2>
                
                <div class="alert-warning">
                    <span>⚠️</span>
                    <span class="alert-text">1 membership expiring soon</span>
                </div>

                <div class="member-card" style="border: 1px solid #fbbf24;">
                    <div class="member-header">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 32px; height: 32px; background: #fef3c7; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                                <span style="color: #f59e0b;">⏰</span>
                            </div>
                            <div>
                                <div class="member-name">Ahmad Rahman</div>
                                <div class="member-id">+60198765432</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 16px; font-weight: bold; color: #ec4899;">15</div>
                            <div style="font-size: 10px; color: #6b7280;">days</div>
                        </div>
                    </div>
                    
                    <div class="stats-row" style="margin: 12px 0;">
                        <div class="stat">
                            <div class="stat-value">8</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM320</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">280</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-small btn-yellow" style="width: 100%; margin-bottom: 8px;">
                        🔔 Send Reminder
                    </button>
                    <div class="btn-row">
                        <button class="btn-small btn-green">✅ Renew</button>
                        <button class="btn-small btn-blue">🎁 Offer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Section -->
        <div id="stats" class="section">
            <!-- Branch Staff View -->
            <div id="branchStatsView" style="display: none;">
                <div style="text-center; padding: 32px; background: white; border-radius: 8px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔒</div>
                    <h3 style="font-size: 16px; font-weight: 500; color: #1f2937; margin-bottom: 8px;">Access Restricted</h3>
                    <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Only master/director can view analytics.</p>
                    <p style="font-size: 12px; color: #6b7280;">Keep adding members to boost our numbers!</p>
                </div>
            </div>
            
            <!-- Master/Director View -->
            <div id="masterStatsView" style="display: none;">
                <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Analytics</h2>
                
                <div class="metric-card metric-blue">
                    <div>
                        <div class="metric-label">Total Revenue</div>
                        <div class="metric-value">RM980</div>
                    </div>
                    <div class="metric-icon">📈</div>
                </div>

                <div class="metric-card metric-green">
                    <div>
                        <div class="metric-label">Active Rate</div>
                        <div class="metric-value">67%</div>
                    </div>
                    <div class="metric-icon">👥</div>
                </div>

                <div class="metric-card metric-purple">
                    <div>
                        <div class="metric-label">Average Spent</div>
                        <div class="metric-value">RM327</div>
                    </div>
                    <div class="metric-icon">💳</div>
                </div>

                <div class="card">
                    <h3 style="font-size: 14px; font-weight: 500; margin-bottom: 12px; color: #1f2937;">Top Spenders</h3>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 20px; height: 20px; background: linear-gradient(135deg, #ec4899, #db2777); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; margin-right: 8px;">1</div>
                            <div>
                                <div style="font-size: 12px; font-weight: 500;">Sarah Chen</div>
                                <div style="font-size: 10px; color: #6b7280;">12 visits</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; font-weight: 500;">RM480</div>
                            <div style="font-size: 10px; color: #6b7280;">450 pts</div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 20px; height: 20px; background: linear-gradient(135deg, #ec4899, #db2777); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; margin-right: 8px;">2</div>
                            <div>
                                <div style="font-size: 12px; font-weight: 500;">Ahmad Rahman</div>
                                <div style="font-size: 10px; color: #6b7280;">8 visits</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; font-weight: 500;">RM320</div>
                            <div style="font-size: 10px; color: #6b7280;">280 pts</div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 20px; height: 20px; background: linear-gradient(135deg, #ec4899, #db2777); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; margin-right: 8px;">3</div>
                            <div>
                                <div style="font-size: 12px; font-weight: 500;">Priya Sharma</div>
                                <div style="font-size: 10px; color: #6b7280;">5 visits</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; font-weight: 500;">RM180</div>
                            <div style="font-size: 10px; color: #6b7280;">150 pts</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <script>
        var selectedBranch = null;
        var currentStaff = null;
        var userRole = null;
        var branchDatabase = [
            // Klang Valley Premium
            'KLCC Branch', 'Pavilion KL', 'Starhill Gallery', 'The Gardens Mall',
            // Klang Valley Malls
            'Sunway Pyramid', 'One Utama', 'Mid Valley', 'Sunway Velocity', 'IOI City Mall', 'Empire Shopping',
            // Selangor
            'Shah Alam Central', 'PJ SS2 Branch', 'Subang Parade', 'Damansara Uptown', 'Kota Damansara', 'USJ Summit',
            // Johor
            'JB City Square', 'Johor Premium', 'Paradigm Mall JB', 'Aeon Tebrau',
            // Penang
            'Gurney Plaza', 'Queensbay Mall', 'Georgetown Heritage', 'Penang Times Square',
            // Other States
            'Ipoh Parade', 'Kuantan City Mall', 'Kota Bharu Mall', 'Melaka Mahkota'
        ];

        function handleBranchChange() {
            var branchSelect = document.getElementById('memberBranch');
            var customSection = document.getElementById('customBranchSection');
            
            if (branchSelect.value === 'custom') {
                customSection.style.display = 'block';
                document.getElementById('customBranchInput').focus();
            } else {
                customSection.style.display = 'none';
            }
        }

        function saveCustomBranch() {
            var customInput = document.getElementById('customBranchInput');
            var branchName = customInput.value.trim();
            
            if (branchName && branchName.length >= 5) {
                // Add to database
                branchDatabase.push(branchName);
                
                // Add to dropdown
                var branchSelect = document.getElementById('memberBranch');
                var customOption = branchSelect.querySelector('option[value="custom"]');
                
                // Create new option before the custom option
                var newOption = document.createElement('option');
                newOption.value = branchName;
                newOption.textContent = '🆕 ' + branchName;
                newOption.style.background = '#dcfce7';
                newOption.style.color = '#166534';
                
                branchSelect.insertBefore(newOption, customOption);
                
                // Select the new branch
                branchSelect.value = branchName;
                
                // Hide custom section
                document.getElementById('customBranchSection').style.display = 'none';
                customInput.value = '';
                
                // Show success message
                alert('✅ New branch added successfully!\n\n"' + branchName + '" has been added to the system and is now available for all staff.');
                
                // Save to local storage for persistence
                localStorage.setItem('customBranches', JSON.stringify(branchDatabase));
                
            } else {
                alert('❌ Please enter a valid branch name (minimum 5 characters)\n\nExample: "Kepong Branch - Kepong Village Mall, Level 1"');
            }
        }

        function cancelCustomBranch() {
            document.getElementById('customBranchSection').style.display = 'none';
            document.getElementById('customBranchInput').value = '';
            document.getElementById('memberBranch').value = '';
        }

        function loadCustomBranches() {
            var saved = localStorage.getItem('customBranches');
            if (saved) {
                var savedBranches = JSON.parse(saved);
                var branchSelect = document.getElementById('memberBranch');
                var customOption = branchSelect.querySelector('option[value="custom"]');
                
                // Add saved custom branches
                savedBranches.forEach(function(branchName) {
                    if (!branchDatabase.includes(branchName)) {
                        branchDatabase.push(branchName);
                        
                        var newOption = document.createElement('option');
                        newOption.value = branchName;
                        newOption.textContent = '🆕 ' + branchName;
                        newOption.style.background = '#dcfce7';
                        newOption.style.color = '#166534';
                        
                        branchSelect.insertBefore(newOption, customOption);
                    }
                });
            }
        }

        function toggleLoginType() {
            var role = document.getElementById('roleSelect').value;
            var branchSection = document.getElementById('branchSection');
            var masterSection = document.getElementById('masterSection');
            
            if (role === 'branch') {
                branchSection.style.display = 'block';
                masterSection.style.display = 'none';
            } else if (role === 'master') {
                branchSection.style.display = 'none';
                masterSection.style.display = 'block';
                selectedBranch = 'all'; // Master can see all branches
            } else {
                branchSection.style.display = 'none';
                masterSection.style.display = 'none';
            }
            
            checkLoginReady();
        }

        function selectBranch(branchId) {
            // Remove previous selection
            var branches = document.querySelectorAll('.branch-btn');
            branches.forEach(function(btn) {
                btn.classList.remove('selected');
            });
            
            // Select new branch
            var selectedBtn = document.querySelector('[data-branch="' + branchId + '"]');
            selectedBtn.classList.add('selected');
            selectedBranch = branchId;
            
            checkLoginReady();
        }

        function checkLoginReady() {
            var role = document.getElementById('roleSelect').value;
            var staffName = document.getElementById('staffName').value.trim();
            var loginBtn = document.getElementById('loginBtn');
            
            var canLogin = false;
            
            if (role === 'branch' && selectedBranch && staffName) {
                canLogin = true;
            } else if (role === 'master' && staffName) {
                var username = document.getElementById('masterUsername').value.trim();
                var password = document.getElementById('masterPassword').value.trim();
                canLogin = username && password;
            }
            
            loginBtn.disabled = !canLogin;
        }

        function login() {
            var role = document.getElementById('roleSelect').value;
            var staffName = document.getElementById('staffName').value.trim();
            
            if (role === 'master') {
                var username = document.getElementById('masterUsername').value.trim();
                var password = document.getElementById('masterPassword').value.trim();
                
                // Simple demo authentication
                if (username === 'admin' && password === 'admin123') {
                    userRole = 'master';
                    currentStaff = staffName + ' (Director)';
                    document.getElementById('currentBranch').textContent = 'All Branches - ' + currentStaff;
                    // Don't pre-select branch for master - they choose when adding members
                } else {
                    alert('❌ Invalid username or password');
                    return;
                }
            } else if (role === 'branch' && selectedBranch && staffName) {
                userRole = 'branch';
                currentStaff = staffName;
                document.getElementById('currentBranch').textContent = branchNames[selectedBranch] + ' - ' + staffName;
                // Pre-select the branch for branch staff
                document.getElementById('memberBranch').value = branchNames[selectedBranch];
            } else {
                alert('❌ Please complete all login fields');
                return;
            }
            
            // Configure UI based on role
            setupUserInterface();
            
            // Hide login screen and show main app
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').classList.add('active');
        }

        function setupUserInterface() {
            if (userRole === 'branch') {
                // Branch staff - only Add tab accessible
                document.getElementById('listTab').style.opacity = '0.5';
                document.getElementById('alertsTab').style.opacity = '0.5';
                document.getElementById('statsTab').style.opacity = '0.5';
                
                // Show restricted views
                document.getElementById('branchListView').style.display = 'block';
                document.getElementById('masterListView').style.display = 'none';
                document.getElementById('branchAlertsView').style.display = 'block';
                document.getElementById('masterAlertsView').style.display = 'none';
                document.getElementById('branchStatsView').style.display = 'block';
                document.getElementById('masterStatsView').style.display = 'none';
                
            } else if (userRole === 'master') {
                // Master - full access
                document.getElementById('listTab').style.opacity = '1';
                document.getElementById('alertsTab').style.opacity = '1';
                document.getElementById('statsTab').style.opacity = '1';
                
                // Show full views
                document.getElementById('branchListView').style.display = 'none';
                document.getElementById('masterListView').style.display = 'block';
                document.getElementById('branchAlertsView').style.display = 'none';
                document.getElementById('masterAlertsView').style.display = 'block';
                document.getElementById('branchStatsView').style.display = 'none';
                document.getElementById('masterStatsView').style.display = 'block';
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Reset all variables
                selectedBranch = null;
                currentStaff = null;
                userRole = null;
                
                // Reset form
                document.getElementById('roleSelect').value = '';
                document.getElementById('staffName').value = '';
                document.getElementById('masterUsername').value = '';
                document.getElementById('masterPassword').value = '';
                
                var branches = document.querySelectorAll('.branch-btn');
                branches.forEach(function(btn) {
                    btn.classList.remove('selected');
                });
                
                // Hide sections
                document.getElementById('branchSection').style.display = 'none';
                document.getElementById('masterSection').style.display = 'none';
                
                // Reset branch selector
                document.getElementById('memberBranch').value = '';
                
                // Show login screen and hide main app
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('mainApp').classList.remove('active');
                
                checkLoginReady();
            }
        }

        // Add event listeners
        document.getElementById('staffName').addEventListener('input', checkLoginReady);
        document.getElementById('masterUsername').addEventListener('input', checkLoginReady);
        document.getElementById('masterPassword').addEventListener('input', checkLoginReady);

        function showTab(tabName) {
            // Check if branch staff is trying to access restricted tabs
            if (userRole === 'branch' && (tabName === 'list' || tabName === 'alerts' || tabName === 'stats')) {
                alert('🔒 Access restricted. Branch staff can only add new members.\n\nContact master/director for full access.');
                return;
            }
            
            // Hide all sections
            var sections = document.querySelectorAll('.section');
            sections.forEach(function(section) {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            var tabs = document.querySelectorAll('.tab');
            tabs.forEach(function(tab) {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.closest('.tab').classList.add('active');
        }

        function addMember() {
            var name = document.getElementById('memberName').value;
            var phone = document.getElementById('memberPhone').value;
            var branch = document.getElementById('memberBranch').value;
            var durationSelect = document.getElementById('memberDuration');
            var duration = durationSelect.value;
            var price = durationSelect.options[durationSelect.selectedIndex].getAttribute('data-price');
            
            if (name && phone && branch) {
                // Clear form
                document.getElementById('memberName').value = '';
                document.getElementById('memberPhone').value = '';
                document.getElementById('memberDuration').value = '12';
                updatePriceDisplay();
                
                // Show success message
                alert('✅ Membership activated successfully!\n\nMember: ' + name + '\nPhone: ' + phone + '\nBranch: ' + branch + '\nPlan: ' + duration + ' months\nPrice: RM' + price + '\nStaff: ' + currentStaff + '\n\nThank you for joining our Fried Rice Club! 🍚');
                
                // Update stats (simple increment)
                var totalElement = document.getElementById('totalMembers');
                var activeElement = document.getElementById('activeMembers');
                var revenueElement = document.getElementById('totalRevenue');
                
                var total = parseInt(totalElement.textContent) + 1;
                var active = parseInt(activeElement.textContent) + 1;
                var currentRevenue = parseInt(revenueElement.textContent.replace('RM', ''));
                var newRevenue = currentRevenue + parseInt(price);
                
                totalElement.textContent = total;
                activeElement.textContent = active;
                revenueElement.textContent = 'RM' + newRevenue;
            } else {
                alert('❌ Please fill in all required fields');
            }
        }

        function updatePriceDisplay() {
            var durationSelect = document.getElementById('memberDuration');
            var price = durationSelect.options[durationSelect.selectedIndex].getAttribute('data-price');
            document.getElementById('priceDisplay').textContent = 'RM' + price;
            document.getElementById('addMemberBtn').textContent = 'Add Member - RM' + price;
        }

        // Load custom branches when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadCustomBranches();
            document.getElementById('memberDuration').addEventListener('change', updatePriceDisplay);
        });
    </script>
</body>
</html>
