<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Fried Rice Club</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div id="login" class="min-h-screen flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-lg max-w-md w-full">
            <div class="text-center mb-6">
                <div class="text-4xl mb-4">üçö</div>
                <h1 class="text-2xl font-bold">Fried Rice Club</h1>
                <p class="text-gray-600">Membership System</p>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Access Level</label>
                    <select id="level" class="w-full p-3 border rounded-lg" onchange="showShop()">
                        <option value="owner">Owner</option>
                        <option value="staff">Staff</option>
                    </select>
                </div>
                
                <div id="shopDiv" style="display: none;">
                    <label class="block text-sm font-medium mb-2">Select Shop</label>
                    <select id="shop" class="w-full p-3 border rounded-lg">
                        <option value="">Choose shop...</option>
                        <option value="1">Shah Alam Central</option>
                        <option value="2">PJ SS2 Branch</option>
                        <option value="3">Subang Parade</option>
                        <option value="4">KL Bukit Bintang</option>
                        <option value="5">Klang Valley Mall</option>
                    </select>
                </div>
                
                <button onclick="doLogin()" class="w-full bg-orange-500 text-white py-3 rounded-lg font-medium">
                    Login
                </button>
            </div>
        </div>
    </div>

    <div id="owner" style="display: none;" class="max-w-6xl mx-auto p-6">
        <div class="bg-orange-500 text-white p-6 rounded-lg mb-6">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold">üçö Owner Dashboard</h1>
                    <p>All Shops</p>
                </div>
                <button onclick="doLogout()" class="bg-white bg-opacity-20 px-4 py-2 rounded">Logout</button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold">Total Members</h3>
                <p class="text-3xl font-bold text-blue-600" id="total">0</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold">Total Revenue</h3>
                <p class="text-3xl font-bold text-green-600" id="revenue">RM0</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold">Active Shops</h3>
                <p class="text-3xl font-bold text-purple-600">5</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold">Today</h3>
                <p class="text-3xl font-bold text-orange-600" id="today">0</p>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-xl font-bold mb-4">All Members</h3>
            <table class="w-full">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="p-3 text-left">ID</th>
                        <th class="p-3 text-left">Name</th>
                        <th class="p-3 text-left">Phone</th>
                        <th class="p-3 text-left">Shop</th>
                        <th class="p-3 text-left">Amount</th>
                    </tr>
                </thead>
                <tbody id="list">
                </tbody>
            </table>
        </div>
    </div>

    <div id="staff" style="display: none;" class="max-w-4xl mx-auto p-6">
        <div class="bg-orange-500 text-white p-6 rounded-lg mb-6">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold">üçö Member Registration</h1>
                    <p id="shopname">Shop Name</p>
                </div>
                <button onclick="doLogout()" class="bg-white bg-opacity-20 px-4 py-2 rounded">Logout</button>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-bold mb-6">New Member</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Customer Name</label>
                        <input type="text" id="name" class="w-full p-3 border rounded-lg" placeholder="Enter name">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">Phone Number</label>
                        <input type="text" id="phone" class="w-full p-3 border rounded-lg" placeholder="+60123456789">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">Email (Optional)</label>
                        <input type="email" id="email" class="w-full p-3 border rounded-lg" placeholder="email@example.com">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">Membership Plan</label>
                        <div class="grid grid-cols-2 gap-3">
                            <div id="p1" class="border-2 border-gray-300 rounded-lg p-3 cursor-pointer text-center" onclick="pick(1, 30)">
                                <div class="font-bold text-lg">RM30</div>
                                <div class="text-sm">1 Month</div>
                            </div>
                            <div id="p3" class="border-2 border-gray-300 rounded-lg p-3 cursor-pointer text-center" onclick="pick(3, 80)">
                                <div class="font-bold text-lg">RM80</div>
                                <div class="text-sm">3 Months</div>
                            </div>
                            <div id="p6" class="border-2 border-gray-300 rounded-lg p-3 cursor-pointer text-center" onclick="pick(6, 150)">
                                <div class="font-bold text-lg">RM150</div>
                                <div class="text-sm">6 Months</div>
                            </div>
                            <div id="p12" class="border-2 border-orange-500 bg-orange-50 rounded-lg p-3 cursor-pointer text-center" onclick="pick(12, 250)">
                                <div class="font-bold text-lg">RM250</div>
                                <div class="text-sm">12 Months</div>
                                <div class="text-xs text-green-600">Best Value</div>
                            </div>
                        </div>
                    </div>

                    <button onclick="add()" class="w-full bg-orange-500 text-white py-4 rounded-lg font-bold text-lg">
                        REGISTER MEMBER - RM<span id="price">250</span>
                    </button>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-bold mb-6">Today</h2>
                <div id="todaylist">
                    <p class="text-gray-500 text-center py-8">No registrations today</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        var user = null;
        var currentShop = null;
        var plan = 12;
        var cost = 250;
        var members = [];

        var shops = ["", "Shah Alam Central", "PJ SS2 Branch", "Subang Parade", "KL Bukit Bintang", "Klang Valley Mall"];

        function load() {
            var data = localStorage.getItem('data');
            if (data) {
                members = JSON.parse(data);
            } else {
                members = [
                    {id: "M001", name: "Sarah Chen", phone: "+60123456789", email: "sarah@email.com", shop: 1, shopname: "Shah Alam Central", price: 250, date: "2024-06-01"},
                    {id: "M002", name: "Ahmad Rahman", phone: "+60198765432", email: "ahmad@email.com", shop: 2, shopname: "PJ SS2 Branch", price: 150, date: "2024-05-15"}
                ];
                save();
            }
        }

        function save() {
            localStorage.setItem('data', JSON.stringify(members));
        }

        function showShop() {
            var level = document.getElementById('level').value;
            var div = document.getElementById('shopDiv');
            if (level === 'staff') {
                div.style.display = 'block';
            } else {
                div.style.display = 'none';
            }
        }

        function doLogin() {
            var level = document.getElementById('level').value;
            var shop = document.getElementById('shop').value;

            if (level === 'staff' && !shop) {
                alert('Please select shop');
                return;
            }

            user = level;
            currentShop = parseInt(shop);

            document.getElementById('login').style.display = 'none';

            if (level === 'owner') {
                document.getElementById('owner').style.display = 'block';
                showOwner();
            } else {
                document.getElementById('staff').style.display = 'block';
                document.getElementById('shopname').innerHTML = shops[currentShop];
                showToday();
            }
        }

        function doLogout() {
            user = null;
            currentShop = null;
            document.getElementById('login').style.display = 'flex';
            document.getElementById('owner').style.display = 'none';
            document.getElementById('staff').style.display = 'none';
        }

        function pick(months, amount) {
            plan = months;
            cost = amount;
            document.getElementById('price').innerHTML = amount;

            document.getElementById('p1').className = 'border-2 border-gray-300 rounded-lg p-3 cursor-pointer text-center';
            document.getElementById('p3').className = 'border-2 border-gray-300 rounded-lg p-3 cursor-pointer text-center';
            document.getElementById('p6').className = 'border-2 border-gray-300 rounded-lg p-3 cursor-pointer text-center';
            document.getElementById('p12').className = 'border-2 border-gray-300 rounded-lg p-3 cursor-pointer text-center';

            document.getElementById('p' + months).className = 'border-2 border-orange-500 bg-orange-50 rounded-lg p-3 cursor-pointer text-center';
        }

        function add() {
            var name = document.getElementById('name').value;
            var phone = document.getElementById('phone').value;
            var email = document.getElementById('email').value;

            if (!name || !phone) {
                alert('Please enter name and phone');
                return;
            }

            var id = 'M' + (members.length + 1).toString().padStart(3, '0');
            var today = new Date().toISOString().split('T')[0];

            var member = {
                id: id,
                name: name,
                phone: phone,
                email: email,
                shop: currentShop,
                shopname: shops[currentShop],
                price: cost,
                date: today
            };

            members.push(member);
            save();

            document.getElementById('name').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('email').value = '';

            showToday();
            alert('Member registered!\nID: ' + id + '\nTotal: RM' + cost);
        }

        function showOwner() {
            var total = members.length;
            var revenue = 0;
            var today = new Date().toISOString().split('T')[0];
            var todayCount = 0;

            for (var i = 0; i < members.length; i++) {
                revenue = revenue + members[i].price;
                if (members[i].date === today) {
                    todayCount = todayCount + 1;
                }
            }

            document.getElementById('total').innerHTML = total;
            document.getElementById('revenue').innerHTML = 'RM' + revenue;
            document.getElementById('today').innerHTML = todayCount;

            var html = '';
            for (var i = 0; i < members.length; i++) {
                var m = members[i];
                html = html + '<tr class="border-b">';
                html = html + '<td class="p-3">' + m.id + '</td>';
                html = html + '<td class="p-3">' + m.name + '</td>';
                html = html + '<td class="p-3">' + m.phone + '</td>';
                html = html + '<td class="p-3">' + m.shopname + '</td>';
                html = html + '<td class="p-3">RM' + m.price + '</td>';
                html = html + '</tr>';
            }
            document.getElementById('list').innerHTML = html;
        }

        function showToday() {
            var today = new Date().toISOString().split('T')[0];
            var todayMembers = [];
            
            for (var i = 0; i < members.length; i++) {
                if (members[i].date === today && members[i].shop === currentShop) {
                    todayMembers.push(members[i]);
                }
            }

            var html = '';
            if (todayMembers.length === 0) {
                html = '<p class="text-gray-500 text-center py-8">No registrations today</p>';
            } else {
                for (var i = 0; i < todayMembers.length; i++) {
                    var m = todayMembers[i];
                    html = html + '<div class="flex justify-between items-center p-3 bg-gray-50 rounded mb-2">';
                    html = html + '<div>';
                    html = html + '<div class="font-medium">' + m.name + '</div>';
                    html = html + '<div class="text-sm text-gray-600">' + m.phone + '</div>';
                    html = html + '</div>';
                    html = html + '<div class="font-bold text-green-600">RM' + m.price + '</div>';
                    html = html + '</div>';
                }
            }
            
            document.getElementById('todaylist').innerHTML = html;
        }

        load();
    </script>
</body>
</html>
