<div class="form-group">
                    <label class="form-label">Branch *</label>
                    <input type="text" class="form-input" id="memberBranch" readonly style="background: #f9fafb; color: #6b7280;">
                </div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fried Rice Shop - Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background-color: #f9fafb;
            max-width: 400px;
            margin: 0 auto;
            min-height: 100vh;
        }
        
        .login-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #f97316, #ea580c);
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 320px;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 24px;
        }
        
        .login-title {
            font-size: 24px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 8px;
        }
        
        .login-subtitle {
            font-size: 14px;
            color: #6b7280;
        }
        
        .branch-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .branch-btn {
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
        }
        
        .branch-btn:hover {
            border-color: #f97316;
            background: #fff7ed;
        }
        
        .branch-btn.selected {
            border-color: #f97316;
            background: #fff7ed;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }
        
        .branch-name {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .branch-location {
            font-size: 12px;
            color: #6b7280;
        }
        
        .branch-status {
            font-size: 10px;
            color: #059669;
            font-weight: 500;
            margin-top: 4px;
        }
        
        .staff-input {
            margin: 16px 0;
        }
        
        .staff-label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 6px;
        }
        
        .staff-field {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .staff-field:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background: #f97316;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .login-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        
        .main-app {
            display: none;
        }
        
        .main-app.active {
            display: block;
        }
        
        .header {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: white;
            padding: 16px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .header p {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 4px;
        }
        
        .branch-info {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            cursor: pointer;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .stat-label {
            font-size: 10px;
        }
        
        .tabs {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
        }
        
        .tab {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: none;
            cursor: pointer;
            text-align: center;
            font-size: 12px;
            color: #6b7280;
            border-bottom: 2px solid transparent;
        }
        
        .tab.active {
            color: #f97316;
            background: #fff7ed;
            border-bottom-color: #f97316;
        }
        
        .tab-icon {
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .content {
            padding: 16px;
            padding-bottom: 80px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 12px;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        .form-label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 4px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }
        
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }
        
        .btn-primary {
            background: #f97316;
            color: white;
        }
        
        .btn-primary:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        
        .branch-display {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            margin-bottom: 8px;
        }
        
        .member-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 8px;
        }
        
        .member-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .member-name {
            font-size: 14px;
            font-weight: 500;
            color: #1f2937;
        }
        
        .member-id {
            font-size: 12px;
            color: #6b7280;
        }
        
        .member-branch {
            font-size: 10px;
            color: #059669;
            background: #ecfdf5;
            padding: 2px 6px;
            border-radius: 4px;
            margin-top: 2px;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 500;
        }
        
        .status-active {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-expiring {
            background: #fef3c7;
            color: #92400e;
        }
        
        .member-phone {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
        }
        
        .stats-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            font-size: 12px;
        }
        
        .stat {
            text-align: center;
            background: #f9fafb;
            padding: 8px;
            border-radius: 4px;
        }
        
        .stat-value {
            font-weight: 500;
        }
        
        .stat-label-small {
            color: #6b7280;
            font-size: 10px;
        }
        
        .metric-card {
            color: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .metric-blue { background: #3b82f6; }
        .metric-green { background: #10b981; }
        .metric-purple { background: #8b5cf6; }
        
        .metric-value {
            font-size: 20px;
            font-weight: bold;
        }
        
        .metric-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .metric-icon {
            font-size: 24px;
        }
        
        .alert-warning {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .alert-text {
            font-size: 14px;
            font-weight: 500;
            color: #92400e;
            margin-left: 8px;
        }
        
        .btn-small {
            padding: 8px 12px;
            font-size: 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .btn-yellow { background: #f59e0b; color: white; }
        .btn-green { background: #10b981; color: white; }
        .btn-blue { background: #3b82f6; color: white; }
        
        .btn-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }
        
        .info-box {
            background: #fff7ed;
            border: 1px solid #fed7aa;
            padding: 12px;
            border-radius: 8px;
            margin-top: 16px;
        }
        
        .info-title {
            font-size: 14px;
            font-weight: 500;
            color: #c2410c;
            margin-bottom: 8px;
        }
        
        .info-list {
            font-size: 12px;
            color: #c2410c;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-header">
                <div style="font-size: 48px; margin-bottom: 16px;">🍚</div>
                <h1 class="login-title">Fried Rice Shop</h1>
                <p class="login-subtitle">Login to Membership System</p>
            </div>
            
            <!-- Role Selection -->
            <div class="form-group">
                <label class="form-label">Login Type</label>
                <select class="form-input" id="roleSelect" onchange="toggleLoginType()">
                    <option value="">Select Role</option>
                    <option value="branch">Branch Staff</option>
                    <option value="master">Master/Director</option>
                </select>
            </div>
            
            <!-- Branch Selection (for branch staff) -->
            <div id="branchSection" style="display: none;">
                <div class="form-group">
                    <label class="form-label">Select Branch</label>
                    <div class="branch-grid">
                        <div class="branch-btn" onclick="selectBranch('shah-alam')" data-branch="shah-alam">
                            <div class="branch-name">🏢 Shah Alam Central</div>
                            <div class="branch-location">No. 45, Jalan Tengku Ampuan Zabedah</div>
                            <div class="branch-status">● Online</div>
                        </div>
                        
                        <div class="branch-btn" onclick="selectBranch('pj-ss2')" data-branch="pj-ss2">
                            <div class="branch-name">🏬 PJ SS2 Branch</div>
                            <div class="branch-location">Lot 2-15, SS2 Shopping Center</div>
                            <div class="branch-status">● Online</div>
                        </div>
                        
                        <div class="branch-btn" onclick="selectBranch('subang')" data-branch="subang">
                            <div class="branch-name">🏪 Subang Parade</div>
                            <div class="branch-location">Level 2, Subang Parade Mall</div>
                            <div class="branch-status">● Online</div>
                        </div>
                        
                        <div class="branch-btn" onclick="selectBranch('klcc')" data-branch="klcc">
                            <div class="branch-name">🌟 KLCC Branch</div>
                            <div class="branch-location">Suria KLCC, Level 4</div>
                            <div class="branch-status">● Online</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Master Login (for master/director) -->
            <div id="masterSection" style="display: none;">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" id="masterUsername" placeholder="Enter username">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="masterPassword" placeholder="Enter password">
                </div>
                <div style="font-size: 11px; color: #6b7280; margin-top: 8px;">
                    💡 Demo: username: <strong>admin</strong>, password: <strong>admin123</strong>
                </div>
            </div>
            
            <div class="staff-input">
                <label class="staff-label">Staff Name</label>
                <input type="text" class="staff-field" id="staffName" placeholder="Enter your name">
            </div>
            
            <button class="login-btn" onclick="login()" id="loginBtn" disabled>
                Login to System
            </button>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="main-app">
        <!-- Header -->
        <div class="header">
            <h1>🍚 Fried Rice Shop</h1>
            <p>Membership Management</p>
            <div class="branch-info">
                <span id="currentBranch">Branch: Loading...</span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalMembers">3</div>
                    <div class="stat-label">Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeMembers">2</div>
                    <div class="stat-label">Active</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRevenue">RM980</div>
                    <div class="stat-label">Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="expiringCount">1</div>
                    <div class="stat-label">Expiring</div>
                </div>
            </div>
        </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="showTab('add')">
            <div class="tab-icon">➕</div>
            <div>Add</div>
        </button>
        <button class="tab" onclick="showTab('list')">
            <div class="tab-icon">👥</div>
            <div>List</div>
        </button>
        <button class="tab" onclick="showTab('alerts')">
            <div class="tab-icon">🔔</div>
            <div>Alerts</div>
        </button>
        <button class="tab" onclick="showTab('stats')">
            <div class="tab-icon">📊</div>
            <div>Stats</div>
        </button>
    </div>

    <!-- Content -->
    <div class="content">
        <!-- Add Member Section -->
        <div id="add" class="section active">
            <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Add New Member</h2>
            
            <div class="card">
                <div class="form-group">
                    <label class="form-label">Name *</label>
                    <input type="text" class="form-input" id="memberName" placeholder="Customer name">
                </div>

                <div class="form-group">
                    <label class="form-label">Phone *</label>
                    <input type="tel" class="form-input" id="memberPhone" placeholder="+60xxxxxxxxx">
                </div>

                <div class="form-group">
                    <label class="form-label">Membership Plan *</label>
                    <select class="form-input" id="memberDuration" style="padding: 8px 12px; font-size: 13px;">
                        <option value="1" data-price="30">1 Month - RM30</option>
                        <option value="3" data-price="80">3 Months - RM80 (Save RM10)</option>
                        <option value="6" data-price="150">6 Months - RM150 (Save RM30)</option>
                        <option value="12" data-price="250" selected>12 Months - RM250 (Save RM110) ⭐ Popular</option>
                        <option value="18" data-price="375">18 Months - RM375 (Save RM165)</option>
                        <option value="24" data-price="480">24 Months - RM480 (Save RM240)</option>
                    </select>
                    <div style="font-size: 11px; color: #6b7280; margin-top: 4px; display: flex; justify-content: space-between;">
                        <span>💡 Longer plans = Better savings</span>
                        <span id="priceDisplay" style="font-weight: bold; color: #f97316;">RM250</span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="addMember()" id="addMemberBtn">Add Member - RM250</button>
            </div>

            <div class="info-box">
                <div class="info-title">💰 Membership Pricing</div>
                <div class="info-list">
                    <strong>Best Value Plans:</strong><br>
                    • 12 months: RM250 (Save RM110)<br>
                    • 18 months: RM375 (Save RM165)<br>
                    • 24 months: RM480 (Save RM240)<br><br>
                    <strong>Member Benefits:</strong><br>
                    • 10% discount on all dishes<br>
                    • Earn 1 point per RM1 spent<br>
                    • Birthday special + free meal<br>
                    • Priority seating during peak hours
                </div>
            </div>
        </div>

        <!-- Members List Section -->
        <div id="list" class="section">
            <!-- Branch Staff View -->
            <div id="branchListView" style="display: none;">
                <div style="text-center; padding: 32px; background: white; border-radius: 8px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔒</div>
                    <h3 style="font-size: 16px; font-weight: 500; color: #1f2937; margin-bottom: 8px;">Access Restricted</h3>
                    <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Branch staff can only add new members.</p>
                    <p style="font-size: 12px; color: #6b7280;">Contact master/director for member details access.</p>
                </div>
            </div>
            
            <!-- Master/Director View -->
            <div id="masterListView" style="display: none;">
                <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">All Members (3)</h2>
                
                <div class="member-card">
                    <div class="member-header">
                        <div>
                            <div class="member-name">Sarah Chen</div>
                            <div class="member-id">M001</div>
                            <div class="member-branch">Shah Alam Central</div>
                        </div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    <div class="member-phone">📞 +60123456789</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value">⭐ 450</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">12</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM480</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-header">
                        <div>
                            <div class="member-name">Ahmad Rahman</div>
                            <div class="member-id">M002</div>
                            <div class="member-branch">PJ SS2 Branch</div>
                        </div>
                        <span class="status-badge status-expiring">Expiring Soon</span>
                    </div>
                    <div class="member-phone">📞 +60198765432</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value">⭐ 280</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">8</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM320</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                    </div>
                </div>

                <div class="member-card">
                    <div class="member-header">
                        <div>
                            <div class="member-name">Priya Sharma</div>
                            <div class="member-id">M003</div>
                            <div class="member-branch">Subang Parade</div>
                        </div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    <div class="member-phone">📞 +60167890123</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value">⭐ 150</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">5</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM180</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alerts Section -->
        <div id="alerts" class="section">
            <!-- Branch Staff View -->
            <div id="branchAlertsView" style="display: none;">
                <div style="text-center; padding: 32px; background: white; border-radius: 8px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔒</div>
                    <h3 style="font-size: 16px; font-weight: 500; color: #1f2937; margin-bottom: 8px;">Access Restricted</h3>
                    <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Only master/director can view renewal alerts.</p>
                    <p style="font-size: 12px; color: #6b7280;">Focus on adding new members for your branch.</p>
                </div>
            </div>
            
            <!-- Master/Director View -->
            <div id="masterAlertsView" style="display: none;">
                <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Renewal Alerts</h2>
                
                <div class="alert-warning">
                    <span>⚠️</span>
                    <span class="alert-text">1 membership expiring soon</span>
                </div>

                <div class="member-card" style="border: 1px solid #fbbf24;">
                    <div class="member-header">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 32px; height: 32px; background: #fef3c7; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                                <span style="color: #f59e0b;">⏰</span>
                            </div>
                            <div>
                                <div class="member-name">Ahmad Rahman</div>
                                <div class="member-id">+60198765432</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 16px; font-weight: bold; color: #f59e0b;">15</div>
                            <div style="font-size: 10px; color: #6b7280;">days</div>
                        </div>
                    </div>
                    
                    <div class="stats-row" style="margin: 12px 0;">
                        <div class="stat">
                            <div class="stat-value">8</div>
                            <div class="stat-label-small">Visits</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">RM320</div>
                            <div class="stat-label-small">Spent</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">280</div>
                            <div class="stat-label-small">Points</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-small btn-yellow" style="width: 100%; margin-bottom: 8px;">
                        🔔 Send Reminder
                    </button>
                    <div class="btn-row">
                        <button class="btn-small btn-green">✅ Renew</button>
                        <button class="btn-small btn-blue">🎁 Offer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Section -->
        <div id="stats" class="section">
            <!-- Branch Staff View -->
            <div id="branchStatsView" style="display: none;">
                <div style="text-center; padding: 32px; background: white; border-radius: 8px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔒</div>
                    <h3 style="font-size: 16px; font-weight: 500; color: #1f2937; margin-bottom: 8px;">Access Restricted</h3>
                    <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px;">Only master/director can view analytics.</p>
                    <p style="font-size: 12px; color: #6b7280;">Keep adding members to boost our numbers!</p>
                </div>
            </div>
            
            <!-- Master/Director View -->
            <div id="masterStatsView" style="display: none;">
                <h2 style="font-size: 16px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Analytics</h2>
                
                <div class="metric-card metric-blue">
                    <div>
                        <div class="metric-label">Total Revenue</div>
                        <div class="metric-value">RM980</div>
                    </div>
                    <div class="metric-icon">📈</div>
                </div>

                <div class="metric-card metric-green">
                    <div>
                        <div class="metric-label">Active Rate</div>
                        <div class="metric-value">67%</div>
                    </div>
                    <div class="metric-icon">👥</div>
                </div>

                <div class="metric-card metric-purple">
                    <div>
                        <div class="metric-label">Average Spent</div>
                        <div class="metric-value">RM327</div>
                    </div>
                    <div class="metric-icon">💳</div>
                </div>

                <div class="card">
                    <h3 style="font-size: 14px; font-weight: 500; margin-bottom: 12px; color: #1f2937;">Top Spenders</h3>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 20px; height: 20px; background: #f59e0b; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; margin-right: 8px;">1</div>
                            <div>
                                <div style="font-size: 12px; font-weight: 500;">Sarah Chen</div>
                                <div style="font-size: 10px; color: #6b7280;">12 visits</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; font-weight: 500;">RM480</div>
                            <div style="font-size: 10px; color: #6b7280;">450 pts</div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 20px; height: 20px; background: #f59e0b; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; margin-right: 8px;">2</div>
                            <div>
                                <div style="font-size: 12px; font-weight: 500;">Ahmad Rahman</div>
                                <div style="font-size: 10px; color: #6b7280;">8 visits</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; font-weight: 500;">RM320</div>
                            <div style="font-size: 10px; color: #6b7280;">280 pts</div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 20px; height: 20px; background: #f59e0b; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; margin-right: 8px;">3</div>
                            <div>
                                <div style="font-size: 12px; font-weight: 500;">Priya Sharma</div>
                                <div style="font-size: 10px; color: #6b7280;">5 visits</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; font-weight: 500;">RM180</div>
                            <div style="font-size: 10px; color: #6b7280;">150 pts</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <script>
        var selectedBranch = null;
        var currentStaff = null;
        var userRole = null;
        var branchNames = {
            'shah-alam': 'Shah Alam Central',
            'pj-ss2': 'PJ SS2 Branch',
            'subang': 'Subang Parade',
            'klcc': 'KLCC Branch'
        };

        function toggleLoginType() {
            var role = document.getElementById('roleSelect').value;
            var branchSection = document.getElementById('branchSection');
            var masterSection = document.getElementById('masterSection');
            
            if (role === 'branch') {
                branchSection.style.display = 'block';
                masterSection.style.display = 'none';
            } else if (role === 'master') {
                branchSection.style.display = 'none';
                masterSection.style.display = 'block';
                selectedBranch = 'all'; // Master can see all branches
            } else {
                branchSection.style.display = 'none';
                masterSection.style.display = 'none';
            }
            
            checkLoginReady();
        }

        function selectBranch(branchId) {
            // Remove previous selection
            var branches = document.querySelectorAll('.branch-btn');
            branches.forEach(function(btn) {
                btn.classList.remove('selected');
            });
            
            // Select new branch
            var selectedBtn = document.querySelector('[data-branch="' + branchId + '"]');
            selectedBtn.classList.add('selected');
            selectedBranch = branchId;
            
            checkLoginReady();
        }

        function checkLoginReady() {
            var role = document.getElementById('roleSelect').value;
            var staffName = document.getElementById('staffName').value.trim();
            var loginBtn = document.getElementById('loginBtn');
            
            var canLogin = false;
            
            if (role === 'branch' && selectedBranch && staffName) {
                canLogin = true;
            } else if (role === 'master' && staffName) {
                var username = document.getElementById('masterUsername').value.trim();
                var password = document.getElementById('masterPassword').value.trim();
                canLogin = username && password;
            }
            
            loginBtn.disabled = !canLogin;
        }

        function login() {
            var role = document.getElementById('roleSelect').value;
            var staffName = document.getElementById('staffName').value.trim();
            
            if (role === 'master') {
                var username = document.getElementById('masterUsername').value.trim();
                var password = document.getElementById('masterPassword').value.trim();
                
                // Simple demo authentication
                if (username === 'admin' && password === 'admin123') {
                    userRole = 'master';
                    currentStaff = staffName + ' (Director)';
                    document.getElementById('currentBranch').textContent = 'All Branches - ' + currentStaff;
                    document.getElementById('memberBranch').value = 'All Branches';
                } else {
                    alert('❌ Invalid username or password');
                    return;
                }
            } else if (role === 'branch' && selectedBranch && staffName) {
                userRole = 'branch';
                currentStaff = staffName;
                document.getElementById('currentBranch').textContent = branchNames[selectedBranch] + ' - ' + staffName;
                document.getElementById('memberBranch').value = branchNames[selectedBranch];
            } else {
                alert('❌ Please complete all login fields');
                return;
            }
            
            // Configure UI based on role
            setupUserInterface();
            
            // Hide login screen and show main app
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').classList.add('active');
        }

        function setupUserInterface() {
            if (userRole === 'branch') {
                // Branch staff - only Add tab accessible
                document.getElementById('listTab').style.opacity = '0.5';
                document.getElementById('alertsTab').style.opacity = '0.5';
                document.getElementById('statsTab').style.opacity = '0.5';
                
                // Show restricted views
                document.getElementById('branchListView').style.display = 'block';
                document.getElementById('masterListView').style.display = 'none';
                document.getElementById('branchAlertsView').style.display = 'block';
                document.getElementById('masterAlertsView').style.display = 'none';
                document.getElementById('branchStatsView').style.display = 'block';
                document.getElementById('masterStatsView').style.display = 'none';
                
            } else if (userRole === 'master') {
                // Master - full access
                document.getElementById('listTab').style.opacity = '1';
                document.getElementById('alertsTab').style.opacity = '1';
                document.getElementById('statsTab').style.opacity = '1';
                
                // Show full views
                document.getElementById('branchListView').style.display = 'none';
                document.getElementById('masterListView').style.display = 'block';
                document.getElementById('branchAlertsView').style.display = 'none';
                document.getElementById('masterAlertsView').style.display = 'block';
                document.getElementById('branchStatsView').style.display = 'none';
                document.getElementById('masterStatsView').style.display = 'block';
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Reset all variables
                selectedBranch = null;
                currentStaff = null;
                userRole = null;
                
                // Reset form
                document.getElementById('roleSelect').value = '';
                document.getElementById('staffName').value = '';
                document.getElementById('masterUsername').value = '';
                document.getElementById('masterPassword').value = '';
                
                var branches = document.querySelectorAll('.branch-btn');
                branches.forEach(function(btn) {
                    btn.classList.remove('selected');
                });
                
                // Hide sections
                document.getElementById('branchSection').style.display = 'none';
                document.getElementById('masterSection').style.display = 'none';
                
                // Show login screen and hide main app
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('mainApp').classList.remove('active');
                
                checkLoginReady();
            }
        }

        // Add event listeners
        document.getElementById('staffName').addEventListener('input', checkLoginReady);
        document.getElementById('masterUsername').addEventListener('input', checkLoginReady);
        document.getElementById('masterPassword').addEventListener('input', checkLoginReady);

        function showTab(tabName) {
            // Check if branch staff is trying to access restricted tabs
            if (userRole === 'branch' && (tabName === 'list' || tabName === 'alerts' || tabName === 'stats')) {
                alert('🔒 Access restricted. Branch staff can only add new members.\n\nContact master/director for full access.');
                return;
            }
            
            // Hide all sections
            var sections = document.querySelectorAll('.section');
            sections.forEach(function(section) {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            var tabs = document.querySelectorAll('.tab');
            tabs.forEach(function(tab) {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.closest('.tab').classList.add('active');
        }

        function addMember() {
            var name = document.getElementById('memberName').value;
            var phone = document.getElementById('memberPhone').value;
            var branch = document.getElementById('memberBranch').value;
            var durationSelect = document.getElementById('memberDuration');
            var duration = durationSelect.value;
            var price = durationSelect.options[durationSelect.selectedIndex].getAttribute('data-price');
            
            if (name && phone && branch) {
                // Clear form
                document.getElementById('memberName').value = '';
                document.getElementById('memberPhone').value = '';
                document.getElementById('memberDuration').value = '12';
                updatePriceDisplay();
                
                // Show success message
                alert('✅ Membership activated successfully!\n\nMember: ' + name + '\nPhone: ' + phone + '\nBranch: ' + branch + '\nPlan: ' + duration + ' months\nPrice: RM' + price + '\nStaff: ' + currentStaff + '\n\nThank you for joining our Fried Rice Club! 🍚');
                
                // Update stats (simple increment)
                var totalElement = document.getElementById('totalMembers');
                var activeElement = document.getElementById('activeMembers');
                var revenueElement = document.getElementById('totalRevenue');
                
                var total = parseInt(totalElement.textContent) + 1;
                var active = parseInt(activeElement.textContent) + 1;
                var currentRevenue = parseInt(revenueElement.textContent.replace('RM', ''));
                var newRevenue = currentRevenue + parseInt(price);
                
                totalElement.textContent = total;
                activeElement.textContent = active;
                revenueElement.textContent = 'RM' + newRevenue;
            } else {
                alert('❌ Please fill in all required fields');
            }
        }

        function updatePriceDisplay() {
            var durationSelect = document.getElementById('memberDuration');
            var price = durationSelect.options[durationSelect.selectedIndex].getAttribute('data-price');
            document.getElementById('priceDisplay').textContent = 'RM' + price;
            document.getElementById('addMemberBtn').textContent = 'Add Member - RM' + price;
        }

        // Update price when duration changes
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('memberDuration').addEventListener('change', updatePriceDisplay);
        });
    </script>
</body>
</html>
